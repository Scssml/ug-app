(function(e){function t(t){for(var r,a,u=t[0],i=t[1],s=t[2],f=0,d=[];f<u.length;f++)a=u[f],o[a]&&d.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(d.length)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o={app:0},c=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-12a1cea1":"91d72dbb","chunk-21e97e22":"9b84734f","chunk-24969a71":"2ec09882","chunk-2d0a3e31":"31f74991","chunk-2d0b3d74":"5db36bd4","chunk-2d2086b7":"96827ab9","chunk-2d22fdde":"e991c2b5","chunk-4d7533c3":"4734391e","chunk-5519d041":"4add3261","chunk-5806ecda":"576067a1","chunk-62a100e8":"ab19883d","chunk-765913bf":"bbb2e48d","chunk-77e33e7f":"b7e2e4d5","chunk-7de84a42":"cc136744","chunk-8afa0880":"c0769d49","chunk-acf58dac":"6f8adb2b"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-12a1cea1":1,"chunk-21e97e22":1,"chunk-24969a71":1,"chunk-4d7533c3":1,"chunk-5519d041":1,"chunk-5806ecda":1,"chunk-62a100e8":1,"chunk-765913bf":1,"chunk-77e33e7f":1,"chunk-7de84a42":1,"chunk-8afa0880":1,"chunk-acf58dac":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-12a1cea1":"5029caa3","chunk-21e97e22":"6d2b640f","chunk-24969a71":"7efb4712","chunk-2d0a3e31":"31d6cfe0","chunk-2d0b3d74":"31d6cfe0","chunk-2d2086b7":"31d6cfe0","chunk-2d22fdde":"31d6cfe0","chunk-4d7533c3":"e438a5eb","chunk-5519d041":"5a64d4bb","chunk-5806ecda":"2e2231d1","chunk-62a100e8":"6e33bf4a","chunk-765913bf":"7c598b54","chunk-77e33e7f":"e92f10a3","chunk-7de84a42":"5d9b19a0","chunk-8afa0880":"6e33bf4a","chunk-acf58dac":"ebe99d4d"}[e]+".css",o=i.p+r,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===r||f===o))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){s=d[u],f=s.getAttribute("data-href");if(f===r||f===o)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var r=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[e],l.parentNode.removeChild(l),n(c)},l.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(l)}).then(function(){a[e]=0}));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise(function(t,n){r=o[e]=[t,n]});t.push(r[2]=c);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=u(e),s=function(t){f.onerror=f.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");c.type=r,c.request=a,n[1](c)}o[e]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:f})},12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=f;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0cfb":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("e956"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("06db"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("23be"),n("7c0e"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var r=n("2b0e"),a=n("ce5b"),o=n.n(a);n("bf40");r["default"].use(o.a,{});var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[e.$route.meta.pagePrint?e._e():n("v-toolbar",{attrs:{app:"",color:"blue-grey lighten-4",height:"42px"}},[n("v-toolbar-items",[e._l(e.menuTop,function(t,r){return[n("v-btn",{key:r,attrs:{to:t.link,flat:"",ripple:"",exact:""}},[e._v("\n          "+e._s(t.title)+"\n        ")])]}),n("v-btn",{attrs:{flat:"",ripple:"",exact:""},on:{click:function(t){e.logout()}}},[e._v("\n        Выход\n      ")])],2)],1),n("v-content",[n("transition",{attrs:{name:"fade"}},[n("router-view")],1)],1),e.$route.meta.pagePrint?e._e():n("v-footer",{attrs:{height:"auto",color:"blue-grey darken-3",dark:""}},[n("v-layout",{attrs:{"justify-center":"",row:""}},[n("v-flex",{attrs:{"text-xs-center":"",xs12:""}},[e._v("\n        © "+e._s(e.yearNow)+"\n      ")])],1)],1)],1)},u=[],i={name:"App",data:function(){return{menuTop:[{title:"Сбор букета",link:"/"},{title:"Заказы",link:"/orders/"},{title:"Клиенты",link:"/clients/"},{title:"Товары",link:"/goods/"},{title:"Оплаты",link:"/pays/"},{title:"Букеты",link:"/bouquets/"},{title:"Флористы",link:"/florists/"},{title:"Курьеры",link:"/couriers/"},{title:"Пользователи",link:"/users/"},{title:"Группы",link:"/users-groups/"}],yearNow:(new Date).getFullYear()}},methods:{logout:function(){var e=this;this.$store.dispatch("logout").then(function(){e.$router.push("/login")})}},mounted:function(){var e=this;this.$store.dispatch("autoAuth").then(function(){}).catch(function(){e.$router.push("/login")})}},s=i,f=(n("cf25"),n("2877")),d=Object(f["a"])(s,c,u,!1,null,null,null),l=d.exports,h=n("8c4f"),p=n("2f62"),b=n("bc3a"),m=n.n(b);r["default"].use(p["a"]);var g=new p["a"].Store({state:{authUser:0,apiUrl:"/",authToken:"",authStatus:""},getters:{isAuthenticated:function(e){return!!e.authToken},authStatus:function(e){return e.authStatus}},mutations:{authRequest:function(e){e.authStatus="loading"},authSuccess:function(e,t){var n=t.token,r=t.id;e.authStatus="success",e.authToken=n,e.authUser=r},authError:function(e){e.authStatus="error"},authLogout:function(e){e.authStatus="",e.authToken="",e.authUser=0}},actions:{login:function(e,t){var n=e.state,r=e.commit,a=e.dispatch;return new Promise(function(e,o){r("authRequest"),m.a.post("".concat(n.apiUrl,"login"),t,{headers:{"Content-Type":"application/json"}}).then(function(n){var o=n.data;localStorage.setItem("user-token",o),m.a.defaults.headers.common.Authorization="Bearer ".concat(o);var c={type:"users",filter:{login:t.login}};a("getItemsList",c).then(function(t){var a=t[0].id;localStorage.setItem("user-id",a),r("authSuccess",{token:o,id:a}),e(n)})}).catch(function(e){r("authError",e),localStorage.removeItem("user-token"),o(e)})})},logout:function(e){var t=e.commit;return new Promise(function(e){t("authLogout"),localStorage.removeItem("user-token"),localStorage.removeItem("user-id"),delete m.a.defaults.headers.common.Authorization,e()})},autoAuth:function(e){var t=e.commit;return new Promise(function(e,n){var r=localStorage.getItem("user-token"),a=+localStorage.getItem("user-id");null!==r?(m.a.defaults.headers.common.Authorization="Bearer ".concat(r),t("authSuccess",{token:r,id:a}),e()):n()})},getItemsList:function(e,t){var n=e.state,r=e.dispatch;return new Promise(function(e,a){var o="".concat(n.apiUrl).concat(t.type),c="?";if(void 0!==t.filter)for(var u=Object.keys(t.filter),i=Object.values(t.filter),s=0;s<u.length;s+=1)if(c+=0!==s?"&":"",Array.isArray(i[s]))for(var f=0;f<i[s].length;f+=1)c+=0!==f?"&":"","creationDate"===u[s]||"deliveryDate"===u[s]?c+="filter[".concat(u[s],"][btw][]=").concat(i[s][f]):c+="filter[".concat(u[s],"][]=").concat(i[s][f]);else c+="filter[".concat(u[s],"]=").concat(i[s]);var d="";if(void 0!==t.sort)for(var l=Object.keys(t.sort),h=Object.values(t.sort),p=0;p<l.length;p+=1)d+="&sort[".concat(l[p],"]=").concat(h[p]);m.a.get(o+c+d).then(function(t){var n=t.data;e(n)}).catch(function(e){401===e.response.status&&(r("logout"),y.push("/login")),a()})})},getItem:function(e,t){var n=e.state,r=e.dispatch;return new Promise(function(e,a){var o="".concat(n.apiUrl).concat(t.type,"/").concat(t.id);m.a.get(o).then(function(t){var n=t.data;e(n)}).catch(function(e){401===e.response.status&&(r("logout"),y.push("/login")),a()})})},addItem:function(e,t){var n=e.state,r=e.dispatch;return new Promise(function(e,a){var o="".concat(n.apiUrl).concat(t.type);m.a.post(o,t.props).then(function(t){e(t.data)}).catch(function(e){401===e.response.status&&(r("logout"),y.push("/login")),a()})})},updateItem:function(e,t){var n=e.state,r=e.dispatch,a="".concat(n.apiUrl).concat(t.type,"/").concat(t.id);return new Promise(function(e,n){m.a.put(a,t.props).then(function(){e()}).catch(function(e){401===e.response.status&&(r("logout"),y.push("/login")),n()})})},deleteItem:function(e,t){var n=e.state,r=e.dispatch,a="".concat(n.apiUrl).concat(t.type,"/").concat(t.id);return new Promise(function(e,n){m.a.delete(a,{data:t.props}).then(function(){e()}).catch(function(e){401===e.response.status&&(r("logout"),y.push("/login")),n()})})},getOrdersWorksList:function(e){return new Promise(function(t,n){var r={text:"Ошибка получения заказов!"},a={text:"Заказы получены!"};m.a.get("".concat(e.state.apiUrl,"orders")).then(function(e){var o=e.data;o=null!==o&&""!==o?o:[],o=o.filter(function(e){return 1===e.status});var c=!1;c?n(r):t({ordersList:o,successData:a})})})},getPurchaseList:function(e){return new Promise(function(t,n){var r={text:"Ошибка получения закупок!"},a={text:"Закупки получены!"};m.a.get("".concat(e.state.apiSrc,"purchase/list.php")).then(function(e){var o=e.data;o=null!==o&&""!==o?o:[];var c=!1;c?n(r):t({purchaseList:o,successData:a})})})}}}),k=function(e,t,n){g.getters.isAuthenticated?n("/"):n()},v=function(e,t,n){g.getters.isAuthenticated?n():n("/login")};r["default"].use(h["a"]);var y=new h["a"]({routes:[{path:"/",name:"home",component:function(){return n.e("chunk-765913bf").then(n.bind(null,"bb51"))},beforeEnter:v},{path:"/login/",name:"login",component:function(){return n.e("chunk-2d2086b7").then(n.bind(null,"a55b"))},beforeEnter:k},{path:"/clients/",name:"clients",component:function(){return n.e("chunk-21e97e22").then(n.bind(null,"c67a"))},beforeEnter:v},{path:"/florists/",name:"florists",component:function(){return n.e("chunk-5519d041").then(n.bind(null,"702b"))},beforeEnter:v},{path:"/couriers/",name:"couriers",component:function(){return n.e("chunk-5806ecda").then(n.bind(null,"b896"))},beforeEnter:v},{path:"/users/",name:"users",component:function(){return n.e("chunk-4d7533c3").then(n.bind(null,"ac1e"))},beforeEnter:v},{path:"/users-groups/",name:"users-groups",component:function(){return n.e("chunk-acf58dac").then(n.bind(null,"9285"))},beforeEnter:v},{path:"/bouquets/",name:"bouquets",component:function(){return n.e("chunk-12a1cea1").then(n.bind(null,"3873"))},beforeEnter:v},{path:"/pays/",name:"pays",component:function(){return n.e("chunk-77e33e7f").then(n.bind(null,"db57"))},beforeEnter:v},{path:"/orders/",name:"orders",component:function(){return n.e("chunk-24969a71").then(n.bind(null,"7f00"))},beforeEnter:v},{path:"/goods/",name:"goods",component:function(){return n.e("chunk-8afa0880").then(n.bind(null,"112a"))},beforeEnter:v},{path:"/goods/history/",name:"history",component:function(){return n.e("chunk-7de84a42").then(n.bind(null,"9957"))}},{path:"/goods/history/:id/",name:"historyView",component:function(){return n.e("chunk-62a100e8").then(n.bind(null,"fc5d"))}},{path:"/print/order/delivery/:id/",name:"orderDelivery",component:function(){return n.e("chunk-2d22fdde").then(n.bind(null,"ea9e"))},meta:{pagePrint:!0}},{path:"/print/order/florist/:id/",name:"orderFlorist",component:function(){return n.e("chunk-2d0b3d74").then(n.bind(null,"29a8"))},meta:{pagePrint:!0}},{path:"/print/order/day-orders/:date/",name:"orderFlorist",component:function(){return n.e("chunk-2d0a3e31").then(n.bind(null,"03a9"))},meta:{pagePrint:!0}}]});r["default"].config.productionTip=!1,new r["default"]({router:y,store:g,render:function(e){return e(l)}}).$mount("#app")},cf25:function(e,t,n){"use strict";var r=n("0cfb"),a=n.n(r);a.a}});
//# sourceMappingURL=app.3e168df5.js.map