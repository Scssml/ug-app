(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7de84a42"],{"91b6":function(t,e,a){"use strict";var i=a("927e"),r=a.n(i);r.a},"927e":function(t,e,a){},9957:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[a("v-dialog",{attrs:{value:t.loadingDialog,persistent:"","max-width":"320px"}},[a("v-list",t._l(t.loadingData,function(e,i){return a("v-list-tile",{key:i,attrs:{avatar:"",color:e.error?"red":e.color}},[a("v-list-tile-avatar",[a("v-progress-circular",{attrs:{value:100,size:30,color:e.error?"red":e.color,indeterminate:e.loading}})],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.title))])],1)],1)}))],1),t.loadingDialog?t._e():[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-icon":"search",label:"Поиск","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer")],1),a("v-data-table",{attrs:{headers:t.headersTable,items:t.purchaseList,"hide-actions":"","no-data-text":"Поставок не найдено","no-results-text":"Поставок не найдено",search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.purchaseDate))]),a("td",[t._v(t._s(e.item.type.name))]),a("td",[t._v(t._s(e.item.purchase))]),a("td",[t._v(t._s(e.item.arrival))]),a("td",[t._v(t._s(t.markup(e.item))+"%")]),a("td",[t._v(t._s(e.item.company))]),a("td",[t._v(t._s(e.item.createdBy.name))]),a("td",{staticClass:"text-xs-right",staticStyle:{width:"7%"}},[a("v-icon",{staticClass:"mr-2",on:{click:function(a){a.preventDefault(),t.$router.push({name:"historyView",params:{id:e.item.id}})}}},[t._v("\n              visibility\n            ")])],1)]}}])})],1)]],2)},r=[],n={name:"History",data:function(){return{loadingData:[{title:"Получение поставок",error:!1,loading:!0,color:"indigo",id:"purchase"}],search:"",headersTable:[{text:"Дата",align:"left",value:"date"},{text:"Тип изменения",align:"left",value:"type"},{text:"Закупка",align:"left",value:"purchase"},{text:"Приход",align:"left",value:"arrival"},{text:"Наценка",align:"left",value:"markup"},{text:"Компания",align:"left",value:"company"},{text:"Менеджер",align:"left",value:"createdBy.name"},{text:"",align:"right",sortable:!1,value:"action"}],usersList:[],purchaseList:[]}},computed:{loadingDialog:function(){var t=this.loadingData.filter(function(t){return!t.error&&!t.loading});return t.length===this.loadingData.length?0:1}},methods:{markup:function(t){var e=0;return 0!==t.arrival&&(e=100-100*t.purchase/t.arrival),+e.toFixed(2)},getPurchaseList:function(){var t=this,e={type:"purchase"},a="Закупки получены!",i="Ошибка получения закупок!";this.$store.dispatch("getItemsList",e).then(function(i){t.purchaseList=i.map(function(t){var e=t;return e});var r=t.loadingData.find(function(t){return t.id===e.type});r.title=a,r.loading=!1}).catch(function(){var a=t.loadingData.find(function(t){return t.id===e.type});a.title=i,a.error=!0})}},mounted:function(){this.getPurchaseList()}},l=n,s=(a("91b6"),a("2877")),o=Object(s["a"])(l,i,r,!1,null,"af016c2c",null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-7de84a42.9942e3d8.js.map